(this.webpackJsonphack2=this.webpackJsonphack2||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(15),s=n.n(a),i=(n(26),n(5)),r=(n(27),n(42)),l=n(43),o=n(7),u=n(2),j=n(9),d=n.n(j),b=n(14),h=n(8),O={expressCheckResult:null,isExpressChecking:!1},f=Object(h.b)("express/expressCheckThunk",function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.anamnesis,e.next=3,fetch("".concat("","/api/express_check"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({anamnesis:n})});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(h.c)(Object(u.a)(Object(u.a)({name:"express",initialState:O},O),{},{extraReducers:function(e){e.addCase(f.fulfilled,(function(e,t){e.expressCheckResult=t.payload,e.isExpressChecking=!1})),e.addCase(f.pending,(function(e){e.isExpressChecking=!0}))}})),p=function(e){return e.express.isExpressChecking},m=function(e){return e.express.expressCheckResult},k=x.reducer,v=(n(34),n(0));function g(){var e=Object(o.c)(p),t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],s=n[1],u=Object(o.c)(m),j=Object(o.b)();return Object(v.jsxs)("div",{className:"ExpressCheck",children:[Object(v.jsx)("h3",{style:{marginBottom:"3%"},children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u0441\u043c\u0435\u0440\u0442\u0438 \u043f\u0430\u0446\u0438\u0435\u043d\u0442\u0430"}),Object(v.jsxs)(r.a,{children:[Object(v.jsxs)(r.a.Group,{className:"mb-3",children:[Object(v.jsx)(r.a.Label,{className:"ExpressCheckLabel",children:"\u0410\u043d\u0430\u043c\u043d\u0435\u0437 :"}),Object(v.jsx)(r.a.Control,{as:"textarea",className:"ExpressCheckTextarea",rows:3,onChange:function(e){s(e.target.value)}})]}),Object(v.jsx)(l.a,{variant:"primary",disabled:e,onClick:e?null:function(){a.length&&j(f({anamnesis:a}))},className:"ExpressCheckSendBtn",children:e?"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u2026":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),(null===u||void 0===u?void 0:u.patient)&&Object(v.jsxs)("div",{className:"ExpressCheckResponse",children:[Object(v.jsxs)("p",{children:["\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u043b\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0438\u0441\u0445\u043e\u0434\u0430: ",Object(v.jsxs)("span",{style:{color:u.patient.isDangerous?"red":"blue"},children:[0|u.patient.probability,"%"]})]}),Object(v.jsxs)("p",{children:["\u0424\u0430\u043a\u0442\u043e\u0440\u044b: ",u.patient.factors]})]})]})}n(36),n(37);var C=function(e){var t=e.setActivePageNumberAction,n=e.paginationInfo,a=e.countShowItem,s=void 0===a?1:a,r=e.firstPageBtn,l=void 0!==r&&r,u=e.lastPageBtn,j=void 0!==u&&u,d=e.prevPageBtn,b=void 0===d||d,h=e.nextPageBtn,O=void 0===h||h,f=e.ellipsisBtn,x=void 0!==f&&f,p=e.showLastPage,m=void 0===p||p,k=Object(o.b)();n.total/n.limit<+n.current-1&&k(t("1"));var g=Object(c.useState)([]),C=Object(i.a)(g,2),N=C[0],P=C[1],y=Object(c.useState)(1),S=Object(i.a)(y,2),T=S[0],_=S[1],w=Object(c.useState)(1),F=Object(i.a)(w,2),A=F[0],B=F[1];Object(c.useLayoutEffect)((function(){for(var e=Math.ceil(n.total/n.limit),t=Math.ceil(e/s),c=Math.ceil(+n.current/s)-1,a=[],i=1;i<=e;i++)a.push(i);P(a),_(t),B(c)}),[s,n]);var E=function(e){if(console.log(n),!(n.total<=n.limit))switch(e.target.innerHTML){case" \xab ":k(t(1));break;case" \u2039 ":1!==+n.current&&+n.current>1&&k(t(+n.current-1));break;case" \u203a ":+n.current!==N.length&&k(t(+n.current+1));break;case" \xbb ":k(t(N.length));break;case" ... ":e.target.hasAttribute("prev")?k(t((A-1)*s+1)):k(t((A+1)*s+1));break;default:k(t(e.target.innerHTML))}};return Object(v.jsxs)("div",{className:"Pagination",children:[l&&Object(v.jsx)("div",{onClick:E,className:"firstPageBtn "+(!(A>1)&&"disabled"),children:" \xab "}),b&&Object(v.jsx)("div",{onClick:E,className:"prevPageBtn "+(1===+n.current&&"disabled"),children:" \u2039 "}),Object(v.jsxs)("div",{className:"pagesBox",children:[0===n.total&&Object(v.jsx)("div",{onClick:E,className:"pageNumber active",children:" 1 "}),x&&A>0&&Object(v.jsx)("div",{onClick:E,className:"pageNumber",children:" 1 "}),x&&A>0&&Object(v.jsx)("div",{onClick:E,className:"ellipsisFirstBtn",prev:"",children:" ... "}),N.filter((function(e){return e>A*s&&e<A*s+s+1})).map((function(e){return e===+n.current?Object(v.jsx)("div",{className:"pageNumber active",children:e},e):Object(v.jsx)("div",{onClick:E,className:"pageNumber",children:e},e)})),x&&A+1<T&&Object(v.jsx)("div",{onClick:E,className:"ellipsisLastBtn",next:"",children:" ... "}),m&&x&&A<T-1&&Object(v.jsxs)("div",{onClick:E,className:"pageNumber",children:[" ",N.length," "]})]}),O&&Object(v.jsx)("div",{onClick:E,className:"nextPageBtn "+(+n.current===N.length&&"disabled"),children:" \u203a "}),j&&Object(v.jsx)("div",{onClick:E,className:"lastPageBtn "+(A===T-1&&"disabled"),children:" \xbb "})]})},N=Object(h.c)({name:"PaginationReducer",initialState:{pagination:{total:110,limit:5,current:1},anamnesPagination:{total:110,limit:10,current:1}},reducers:{setTotalCountAction:function(e,t){e.pagination.total=t.payload},setActivePageNumberAction:function(e,t){e.pagination.current=t.payload},setAnamnesTotalCountAction:function(e,t){e.anamnesPagination.total=t.payload},setAnamnesActivePageNumberAction:function(e,t){e.anamnesPagination.current=t.payload}}}),P=N.reducer,y=N.actions,S=y.setTotalCountAction,T=(y.setActivePageNumberAction,y.setAnamnesTotalCountAction),_=y.setAnamnesActivePageNumberAction,w=function(e){return e.PaginationReducer.anamnesPagination},F=function(e){return e.PaginationReducer.pagination},A=(n(38),{isFileSending:!1,tasksCount:0,currentTask:{},currentPatients:[],currentPatientsCount:0,tasks:[]}),B=Object(h.b)("fileCheck/sendFileThunk",function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formData,e.next=3,fetch("".concat("","/api/tasks"),{method:"POST",body:n});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(h.b)("fileCheck/getTasksThunk",function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,a,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.skip,c=t.take,a=t.setCounter,s=t.counter,e.next=3,fetch("".concat("","/api/tasks?skip=").concat(n,"&take=").concat(c,"&type=full"));case 3:return i=e.sent,a(s-1),e.next=7,i.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=Object(h.b)("fileCheck/getPatientsThunk",function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,a,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.skip,c=t.take,a=t.id,s=t.condStr,e.next=3,fetch("".concat("","/api/tasks/").concat(a,"?skip=").concat(n,"&take=").concat(c).concat(s));case 3:return i=e.sent,e.next=6,i.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(h.c)(Object(u.a)(Object(u.a)({name:"fileCheck",initialState:A},A),{},{reducers:{setCurrentTask:function(e,t){e.currentTask=t.payload},setPatientsCount:function(e,t){e.currentPatientsCount=t.payload},clearCurrentPatients:function(e){e.currentPatients=[]}},extraReducers:function(e){e.addCase(B.fulfilled,(function(e){e.isFileSending=!1})),e.addCase(B.pending,(function(e){e.isFileSending=!0})),e.addCase(E.fulfilled,(function(e,t){e.tasks=t.payload.tasks,e.tasksCount=t.payload.count})),e.addCase(D.fulfilled,(function(e,t){console.log(t.payload),e.currentPatients=t.payload.patients}))}})),I=L.actions,R=I.setCurrentTask,M=I.setPatientsCount,H=I.clearCurrentPatients,J=function(e){return e.fileCheck.isFileSending},z=function(e){return e.fileCheck.tasks},G=function(e){return e.fileCheck.tasksCount},q=function(e){return e.fileCheck.currentTask},K=function(e){return e.fileCheck.currentPatients},Q=function(e){return e.fileCheck.currentPatientsCount},U=L.reducer,V=function(e){var t=e.setIsShowTable,n=Object(c.useState)(!1),a=Object(i.a)(n,2),s=a[0],r=a[1],l=Object(c.useState)(!0),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(c.useState)(!1),h=Object(i.a)(b,2),O=h[0],f=h[1],x=Object(c.useState)(!1),p=Object(i.a)(x,2),m=p[0],k=p[1],g=Object(o.c)(q),N=Object(o.c)(K),P=Object(c.useState)(""),y=Object(i.a)(P,2),S=y[0],F=y[1],A=Object(o.c)(Q),B=Object(o.c)(w),E=Object(c.useState)(""),L=Object(i.a)(E,2),I=L[0],R=L[1],M=Object(o.b)(),J=Object(o.c)(w);return Object(c.useEffect)((function(){M(T(A))}),[A]),Object(c.useEffect)((function(){M(D({skip:10*(B.current-1),take:10,id:g.id,condStr:I}))}),[g,B.current,I]),Object(c.useEffect)((function(){M(_(1))}),[]),Object(v.jsx)("div",{className:"Table",children:Object(v.jsxs)("div",{className:"content",children:[Object(v.jsx)("div",{className:"close",onClick:function(){t(!1),M(_(1)),M(H())}}),Object(v.jsxs)("div",{className:"anamnes ".concat(s?"active":""),children:[Object(v.jsx)("div",{className:"anamnesMain",children:Array.from(S).map((function(e){return"\n"===e?Object(v.jsx)("br",{}):e}))}),Object(v.jsx)("div",{className:"anamnesHidden",onClick:function(){return r(!1)},children:Object(v.jsxs)("svg",{viewBox:"0 0 490 490",children:[Object(v.jsx)("path",{d:"M254.436,0H0.389l235.564,245L0.389,490h254.047l235.176-245L254.436,0z M72.316,459.375L278.451,245L72.316,30.625h169.08\r L447.173,245L241.396,459.375H72.316z"}),Object(v.jsx)("polygon",{points:"168.378,72.734 295.204,204.638 334.016,245.004 295.204,285.369 168.381,417.266 222.833,417.266\r 388.195,245.003 222.833,72.734 \t"})]})})]}),Object(v.jsxs)("div",{className:"Table_list",children:[Object(v.jsx)("div",{className:"Table_list_title",children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430"}),Object(v.jsxs)("div",{className:"Table_filter",children:[Object(v.jsx)("div",{className:"".concat(j),onClick:function(){d(!0),k(!1),f(!1),R(""),M(T(g.notDangerous+g.dangerous))},children:"\u0412\u0441\u0435"}),Object(v.jsx)("div",{className:"".concat(O),onClick:function(){f(!0),d(!1),k(!1),R("&isDangerous=true"),M(T(g.dangerous))},children:"\u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u043c\u0435\u0440\u0442\u0438"}),Object(v.jsx)("div",{className:"".concat(m),onClick:function(){k(!0),d(!1),f(!1),R("&isDangerous=false"),M(T(g.notDangerous))},children:"\u041d\u0438\u0437\u043a\u0430\u044f \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u043c\u0435\u0440\u0442\u0438"})]}),Object(v.jsxs)("div",{className:"Table_list_head",children:[Object(v.jsx)("div",{children:"id"}),Object(v.jsx)("div",{children:"\u0430\u043d\u0430\u043c\u043d\u0435\u0437"}),Object(v.jsx)("div",{children:"\u0444\u0430\u043a\u0442\u043e\u0440\u044b"}),Object(v.jsx)("div",{children:"\u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u043c\u0435\u0440\u0442\u0438"})]}),N.map((function(e,t){return Object(v.jsxs)("div",{className:"item",style:{backgroundColor:"".concat(e.isDangerous?"rgba(255, 0, 0, 0.44)":"rgba(0, 128, 0, 0.45)")},children:[Object(v.jsx)("div",{children:e.id}),Object(v.jsx)("div",{className:"anamnesBtn",onClick:function(){r(!0),F(e.anamnesis)},children:"\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),Object(v.jsx)("div",{children:e.factors}),Object(v.jsxs)("div",{children:[0|e.probability,"%"]})]})}))]}),Object(v.jsx)(C,{setActivePageNumberAction:_,countShowItem:5,paginationInfo:J})]})})},W=function(){var e=Object(o.c)(F),t=Object(o.c)(J),n=Object(o.c)(G),a=Object(o.c)(z),s=Object(o.c)(F),r=Object(c.useState)(!1),l=Object(i.a)(r,2),u=l[0],j=l[1],d=Object(c.useState)(-1e7),b=Object(i.a)(d,2),h=b[0],O=b[1],f=Object(c.useState)(null),x=Object(i.a)(f,2),p=x[0],m=x[1],k=Object(c.useState)(""),g=Object(i.a)(k,2),N=g[0],P=g[1],y=Object(o.b)();Object(c.useEffect)((function(){-1e7===h?y(E({skip:10*(s.current-1),take:10,setCounter:O,counter:h})):setTimeout((function(){y(E({skip:10*(s.current-1),take:10,setCounter:O,counter:h}))}),1e3)}),[h]),Object(c.useEffect)((function(){y(S(n))}),[n]);return Object(c.useEffect)((function(){window.document.body.style.overflow=u?"hidden":"visible"}),[u]),Object(v.jsxs)("div",{className:"FileCheck",children:[u&&Object(v.jsx)(V,{setIsShowTable:j}),Object(v.jsxs)("div",{className:"FileCheck_File",children:[Object(v.jsxs)("div",{className:"FileCheck_addFilePath",children:[Object(v.jsx)("span",{children:"\u0424\u0430\u0439\u043b: "}),N.length?N:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"]}),Object(v.jsxs)("label",{style:t?{background:"grey"}:{},htmlFor:"checkFile",children:[t?"\u0418\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",Object(v.jsx)("input",{id:"checkFile",type:"file",onChange:function(e){P(e.target.value),m(e.target.files[0])}})]}),!t&&Object(v.jsx)("div",{className:"FileCheck_send ".concat(!!p),onClick:function(e){if(e.preventDefault(),p&&N.length){var t=new FormData;t.append("file",p),y(B({formData:t})),P(""),m(null)}},children:" \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "})]}),Object(v.jsxs)("div",{className:"FileCheck_list",children:[Object(v.jsx)("div",{className:"FileCheck_list_title",children:"\u0421\u043f\u0438\u0441\u043e\u043a :"}),Object(v.jsx)("div",{className:"FileCheck_list_main",children:a.map((function(e,t){return Object(v.jsx)(X,{task:e,setIsShowTable:j})}))}),Object(v.jsx)(C,{countShowItem:5,paginationInfo:e})]})]})},X=function(e){var t=e.setIsShowTable,n=e.task,c=Object(o.b)();return Object(v.jsxs)("div",{className:"FileCheck_list_item",onClick:function(){c(R(n)),c(M(n.dangerous+n.notDangerous)),t(!0)},children:[Object(v.jsx)("div",{className:"FileCheck_list_date",children:n.time}),Object(v.jsx)("div",{className:"FileCheck_list_status",style:{color:"run"===n.status?"orange":"green"},children:"run"===n.status?"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"}),Object(v.jsxs)("div",{className:"FileCheck_list_itemMain",children:[Object(v.jsxs)("div",{className:"FileCheck_list_all",children:[Object(v.jsx)("span",{children:"\u0412\u0441\u0435\u0433\u043e: "}),n.dangerous+n.notDangerous]}),Object(v.jsxs)("div",{className:"FileCheck_list_high",style:{color:"red"},children:[Object(v.jsx)("span",{children:"\u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u043c\u0435\u0440\u0442\u0438: "}),n.dangerous]}),Object(v.jsxs)("div",{className:"FileCheck_list_low",style:{color:"blue"},children:[Object(v.jsx)("span",{children:"\u041d\u0438\u0437\u043a\u0430\u044f \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u043c\u0435\u0440\u0442\u0438: "}),n.notDangerous]})]})]})};var Y=function(){var e=Object(c.useState)("text"),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("div",{className:"header",children:Object(v.jsx)("h1",{children:"Golden Rain Analyser"})}),Object(v.jsxs)("div",{className:"content",children:[Object(v.jsxs)("div",{className:"changePage",children:[Object(v.jsx)("div",{onClick:function(){return a("text")},className:"changePageBtn ".concat("text"===n),children:"\u0422\u0435\u043a\u0441\u0442"}),Object(v.jsx)("div",{onClick:function(){return a("file")},className:"changePageBtn ".concat("file"===n),children:"\u0424\u0430\u0439\u043b"})]}),"text"===n&&Object(v.jsx)(g,{}),"file"===n&&Object(v.jsx)(W,{})]})]})},Z=Object(h.a)({reducer:{express:k,PaginationReducer:P,fileCheck:U}});n(39);s.a.render(Object(v.jsx)(o.a,{store:Z,children:Object(v.jsx)(Y,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b9420e37.chunk.js.map